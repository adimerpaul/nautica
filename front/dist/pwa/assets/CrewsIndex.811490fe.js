import{Q as w}from"./QTooltip.13af7881.js";import{_ as x,Q as m,R as f,S as t,T as o,U as s,X as g,b9 as D,Z as b,aE as d,ar as Q,aC as y,aB as _,V as n,W as I,aT as k,L as T,aD as N}from"./index.838676e5.js";import{b as h,Q as S}from"./QTable.2b4a8be7.js";import{e as p}from"./QChip.7154647f.js";import{b as q,Q as v}from"./QSpace.073f2079.js";import{Q as A}from"./QForm.8689fc3e.js";import{Q as U}from"./QPage.6cd55def.js";import{C as B}from"./ClosePopup.dfda7b47.js";import"./QList.d421cb78.js";import"./QMarkupTable.bc1dbbca.js";import"./use-fullscreen.64084ce4.js";import"./format.2cae61da.js";const E={name:"BoatsIndex",data(){return{columns:[{name:"option",label:"Opciones",align:"left",field:l=>l.option},{name:"name",label:"Nombre",align:"left",field:l=>l.name},{name:"role",label:"Rol",align:"left",field:l=>l.role},{name:"nacionalidad",label:"Nacionalidad",align:"left",field:l=>l.nacionalidad},{name:"tipoDocumento",label:"Tipo de Documento",align:"left",field:l=>l.tipoDocumento},{name:"numeroIdentificacion",label:"N\xFAmero de Identificaci\xF3n",align:"left",field:l=>l.numeroIdentificacion},{name:"telefono",label:"Tel\xE9fono",align:"left",field:l=>l.telefono},{name:"id",label:"ID",align:"left",field:l=>l.id},{name:"boat",label:"Barco",align:"left",field:l=>{var i;return(i=l.boat)==null?void 0:i.name}}],loading:!1,crews:[],crew:{},crewDialog:!1,clienDialogHistory:!1,filter:"",passwordShow:!1,boats:[]}},mounted(){this.crewGet(),this.boatsGet()},methods:{boatsGet(){this.$axios.get("boats").then(l=>{this.boats=l.data})},crewSave(){this.loading=!0,this.crew.id?this.$axios.put(`crews/${this.crew.id}`,this.crew).then(l=>{this.crewDialog=!1;const i=this.crews.findIndex(r=>r.id===this.crew.id);this.crews.splice(i,1,l.data)}).catch(l=>{this.$alert.error(l.response.data.message)}).finally(()=>{this.loading=!1}):this.$axios.post("crews",this.crew).then(l=>{this.crewDialog=!1,this.crews.unshift(l.data)}).catch(l=>{this.$alert.error(l.response.data.message)}).finally(()=>{this.loading=!1})},crewDelete(l){this.$alert.confirm("\xBFEst\xE1 seguro de eliminar este crewe?").onOk(()=>{this.loading=!0,this.$axios.delete(`crews/${l.id}`).then(i=>{const r=this.crews.findIndex(V=>V.id===i.data.id);console.log(r),r!==-1&&this.crews.splice(r,1)}).catch(i=>{this.$alert.error(i.response.data.message)}).finally(()=>{this.loading=!1})})},crewEdit(l){this.crewDialog=!0,this.crew={...l}},crewAdd(){this.crewDialog=!0,this.crew={name:""}},crewGet(){this.loading=!0,this.$axios.get("crews").then(l=>{this.crews=l.data}).catch(l=>{this.$alert.error(l.response.data.message)}).finally(()=>{this.loading=!1})}}},G={class:"text-h6"},R={class:"row"},M={class:"col-12"},O={class:"col-12"},P={class:"col-12"},z={class:"col-12"},F={class:"col-12"},H={class:"col-12"},L={class:"col-12"};function W(l,i,r,V,a,c){return m(),f(U,{class:"bg-grey-3 q-pa-md"},{default:t(()=>[o(S,{rows:a.crews,columns:a.columns,title:"Tripulantes","rows-per-page-options":[0],"row-key":"id",dense:"",filter:a.filter,loading:a.loading},{"body-cell-option":t(e=>[o(h,{"auto-width":""},{default:t(()=>[o(s,{flat:"",dense:"",icon:"edit",onClick:u=>c.crewEdit(e.row)},{default:t(()=>[o(w,null,{default:t(()=>[g("Editar")]),_:1})]),_:2},1032,["onClick"]),o(s,{flat:"",dense:"",icon:"delete",onClick:u=>c.crewDelete(e.row)},{default:t(()=>[o(w,null,{default:t(()=>[g("Eliminar")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),"body-cell-boat":t(e=>[o(h,{props:e},{default:t(()=>{var u,C;return[o(p,{label:(u=e.row.boat)==null?void 0:u.name,"text-color":"white",style:D({backgroundColor:(C=e.row.boat)==null?void 0:C.color}),icon:"directions_boat"},null,8,["label","style"])]}),_:2},1032,["props"])]),"body-cell-role":t(e=>[o(h,{props:e},{default:t(()=>[e.row.role==="CAPITAN"?(m(),f(p,{key:0,label:"Capitan","text-color":"white",dense:"",icon:"person",color:"primary"})):b("",!0),e.row.role==="MARINERO"?(m(),f(p,{key:1,label:"Tripulante","text-color":"white",dense:"",icon:"person",color:"green"})):b("",!0),e.row.role==="MAQUINISTA"?(m(),f(p,{key:2,label:"Maquinista","text-color":"white",dense:"",icon:"person",color:"accent"})):b("",!0)]),_:2},1032,["props"])]),"top-right":t(()=>[o(s,{outline:"",dense:"",icon:"add_circle",onClick:c.crewAdd,label:"Agregar","no-caps":"",loading:a.loading},{default:t(()=>[o(w,null,{default:t(()=>[g("Agregar")]),_:1})]),_:1},8,["onClick","loading"]),o(d,{modelValue:a.filter,"onUpdate:modelValue":i[0]||(i[0]=e=>a.filter=e),dense:"",class:"q-ml-md",debounce:"300",placeholder:"Buscar",outlined:"",clearable:""},{append:t(()=>[o(Q,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","columns","filter","loading"]),o(N,{modelValue:a.crewDialog,"onUpdate:modelValue":i[9]||(i[9]=e=>a.crewDialog=e),persistent:""},{default:t(()=>[o(y,{style:{width:"250px","max-width":"90vw"}},{default:t(()=>[o(_,{class:"row items-center q-pb-none"},{default:t(()=>[n("div",G,I(a.crew.id?"Editar":"Agregar")+" Tripulantes",1),o(q),o(s,{flat:"",dense:"",icon:"close",onClick:i[1]||(i[1]=e=>a.crewDialog=!1)})]),_:1}),o(A,{onSubmit:c.crewSave},{default:t(()=>[o(_,null,{default:t(()=>[n("div",R,[n("div",M,[o(d,{modelValue:a.crew.name,"onUpdate:modelValue":i[2]||(i[2]=e=>a.crew.name=e),label:"Nombre",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),n("div",O,[o(v,{modelValue:a.crew.role,"onUpdate:modelValue":i[3]||(i[3]=e=>a.crew.role=e),options:l.$cargos,label:"Rol",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"],"value-field":"value","label-field":"label","map-options":"","emit-value":""},null,8,["modelValue","options","rules"])]),n("div",P,[o(d,{modelValue:a.crew.nacionalidad,"onUpdate:modelValue":i[4]||(i[4]=e=>a.crew.nacionalidad=e),label:"Nacionalidad",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),n("div",z,[o(d,{modelValue:a.crew.tipoDocumento,"onUpdate:modelValue":i[5]||(i[5]=e=>a.crew.tipoDocumento=e),label:"Tipo de Documento",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),n("div",F,[o(d,{modelValue:a.crew.numeroIdentificacion,"onUpdate:modelValue":i[6]||(i[6]=e=>a.crew.numeroIdentificacion=e),label:"N\xFAmero de Identificaci\xF3n",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),n("div",H,[o(d,{modelValue:a.crew.telefono,"onUpdate:modelValue":i[7]||(i[7]=e=>a.crew.telefono=e),label:"Tel\xE9fono",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),n("div",L,[o(v,{modelValue:a.crew.boat_id,"onUpdate:modelValue":i[8]||(i[8]=e=>a.crew.boat_id=e),options:a.boats,label:"Barco",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"],"emit-value":"","map-options":"","option-value":"id","option-label":"name"},null,8,["modelValue","options","rules"])])])]),_:1}),o(k,{align:"right"},{default:t(()=>[T(o(s,{flat:"",label:"Cancelar",loading:a.loading},null,8,["loading"]),[[B]]),o(s,{color:"primary",label:"Guardar",type:"submit",loading:a.loading},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}var te=x(E,[["render",W]]);export{te as default};

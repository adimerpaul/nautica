import{Q as u}from"./QTooltip.3d730680.js";import{_ as h,Q as C,R as V,S as s,T as i,U as a,X as m,aE as d,an as b,aC as _,aB as p,V as o,W as Q,aF as x,L as y,aG as D}from"./index.550f8220.js";import{Q as v,a as w,C as k}from"./ClosePopup.719e01db.js";import{Q as E}from"./QSpace.c62f1999.js";import{Q as I}from"./QForm.333f00b2.js";import{Q as T}from"./QPage.0216952a.js";import"./position-engine.6df5169d.js";import"./format.2611cbf2.js";const A={name:"ClientsIndex",data(){return{columns:[{name:"option",label:"Opciones",align:"left",field:e=>e.option},{name:"id",label:"ID",align:"left",field:e=>e.id},{name:"name",label:"Nombre",align:"left",field:e=>e.name},{name:"lastname",label:"Apellido",align:"left",field:e=>e.lastname},{name:"company",label:"Empresa",align:"left",field:e=>e.company},{name:"nit",label:"NIT",align:"left",field:e=>e.nit},{name:"phone",label:"Tel\xE9fono",align:"left",field:e=>e.phone}],loading:!1,clients:[],client:{},clientDialog:!1,clienDialogHistory:!1,filter:""}},mounted(){this.getClients()},methods:{clientSave(){this.loading=!0,this.client.id?this.$axios.put(`clients/${this.client.id}`,this.client).then(e=>{this.clientDialog=!1;const n=this.clients.findIndex(r=>r.id===this.client.id);this.clients.splice(n,1,e.data)}).catch(e=>{this.$alert.error(e.response.data.message)}).finally(()=>{this.loading=!1}):this.$axios.post("clients",this.client).then(e=>{this.clientDialog=!1,this.clients.unshift(e.data)}).catch(e=>{this.$alert.error(e.response.data.message)}).finally(()=>{this.loading=!1})},clientDelete(e){this.$alert.confirm("\xBFEst\xE1 seguro de eliminar este cliente?").onOk(()=>{this.loading=!0,this.$axios.delete(`clients/${e}`).then(n=>{const r=this.clients.findIndex(f=>f.id===e);this.clients.splice(r,1)}).catch(n=>{this.$alert.error(n.response.data.message)}).finally(()=>{this.loading=!1})})},clientHistory(e){this.clienDialogHistory=!0,this.client={...e}},clientEdit(e){this.clientDialog=!0,this.client={...e}},clientAdd(){this.clientDialog=!0,this.client={name:"",ci:""}},getClients(){this.loading=!0,this.$axios.get("clients").then(e=>{this.clients=e.data}).catch(e=>{this.$alert.error(e.response.data.message)}).finally(()=>{this.loading=!1})}}},S={class:"text-h6"},U={class:"row"},q={class:"col-12"},N={class:"col-12"},B={class:"col-12"},H={class:"col-12"},F={class:"col-12"};function G(e,n,r,f,t,c){return C(),V(T,{class:"bg-grey-3 q-pa-md"},{default:s(()=>[i(w,{rows:t.clients,columns:t.columns,title:"Clientes","rows-per-page-options":[0],"row-key":"id",dense:"",filter:t.filter,loading:t.loading},{"body-cell-option":s(l=>[i(v,{"auto-width":""},{default:s(()=>[i(a,{flat:"",dense:"",icon:"edit",onClick:g=>c.clientEdit(l.row)},{default:s(()=>[i(u,null,{default:s(()=>[m("Editar")]),_:1})]),_:2},1032,["onClick"]),i(a,{flat:"",dense:"",icon:"delete",onClick:g=>c.clientDelete(l.row.id)},{default:s(()=>[i(u,null,{default:s(()=>[m("Eliminar")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),"top-right":s(()=>[i(a,{outline:"",dense:"",icon:"add_circle",onClick:c.clientAdd,label:"Agregar","no-caps":"",loading:t.loading},{default:s(()=>[i(u,null,{default:s(()=>[m("Agregar")]),_:1})]),_:1},8,["onClick","loading"]),i(d,{modelValue:t.filter,"onUpdate:modelValue":n[0]||(n[0]=l=>t.filter=l),dense:"",class:"q-ml-md",debounce:"300",placeholder:"Buscar",outlined:""},{append:s(()=>[i(b,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","columns","filter","loading"]),i(D,{modelValue:t.clientDialog,"onUpdate:modelValue":n[7]||(n[7]=l=>t.clientDialog=l),persistent:""},{default:s(()=>[i(_,{style:{width:"250px","max-width":"90vw"}},{default:s(()=>[i(p,{class:"row items-center"},{default:s(()=>[o("div",S,Q(t.client.id?"Editar":"Agregar")+" Cliente",1),i(E),i(a,{flat:"",dense:"",icon:"close",onClick:n[1]||(n[1]=l=>t.clientDialog=!1)})]),_:1}),i(I,{onSubmit:c.clientSave},{default:s(()=>[i(p,null,{default:s(()=>[o("div",U,[o("div",q,[i(d,{modelValue:t.client.name,"onUpdate:modelValue":n[2]||(n[2]=l=>t.client.name=l),label:"Nombre",outlined:"",dense:"",rules:[l=>!!l||"Campo requerido"]},null,8,["modelValue","rules"])]),o("div",N,[i(d,{modelValue:t.client.lastname,"onUpdate:modelValue":n[3]||(n[3]=l=>t.client.lastname=l),label:"Apellido",outlined:"",dense:"",rules:[l=>!!l||"Campo requerido"]},null,8,["modelValue","rules"])]),o("div",B,[i(d,{modelValue:t.client.company,"onUpdate:modelValue":n[4]||(n[4]=l=>t.client.company=l),label:"Empresa",outlined:"",dense:"",rules:[l=>!!l||"Campo requerido"]},null,8,["modelValue","rules"])]),o("div",H,[i(d,{modelValue:t.client.nit,"onUpdate:modelValue":n[5]||(n[5]=l=>t.client.nit=l),label:"NIT",outlined:"",dense:"",rules:[l=>!!l||"Campo requerido"]},null,8,["modelValue","rules"])]),o("div",F,[i(d,{modelValue:t.client.phone,"onUpdate:modelValue":n[6]||(n[6]=l=>t.client.phone=l),label:"Tel\xE9fono",outlined:"",dense:"",rules:[l=>!!l||"Campo requerido"]},null,8,["modelValue","rules"])])])]),_:1}),i(x,{align:"right"},{default:s(()=>[y(i(a,{flat:"",label:"Cancelar",loading:t.loading},null,8,["loading"]),[[k]]),i(a,{color:"primary",label:"Guardar",type:"submit",loading:t.loading},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}var J=h(A,[["render",G]]);export{J as default};

import{Q as c}from"./QTooltip.4952d993.js";import{_ as y,Q as _,R as b,S as s,T as a,U as r,X as p,b9 as C,V as n,aE as m,ar as x,aC as w,aB as f,W as Q,aT as V,L as D,aD as v}from"./index.bdea86f4.js";import{b as h,Q as k}from"./QTable.89ee0f5d.js";import{e as S}from"./QChip.96717a8e.js";import{Q as E}from"./QSpace.55f6bfcc.js";import{Q as T}from"./QForm.bcd5d4cd.js";import{Q as I}from"./QPage.94691135.js";import{C as q}from"./ClosePopup.9a04f089.js";import"./QList.e6741abc.js";import"./QMarkupTable.bc6243f6.js";import"./QSelect.5025cf2a.js";import"./format.2cae61da.js";import"./use-fullscreen.0c649466.js";const A={name:"CompaniesIndex",data(){return{columns:[{name:"option",label:"Opciones",align:"left",field:e=>e.option},{name:"id",label:"ID",align:"left",field:e=>e.id},{name:"name",label:"Nombre",align:"left",field:e=>e.name},{name:"address",label:"Direcci\xF3n",align:"left",field:e=>e.address},{name:"phone",label:"Tel\xE9fono",align:"left",field:e=>e.phone}],loading:!1,companies:[],company:{},companyDialog:!1,clienDialogHistory:!1,filter:"",passwordShow:!1}},mounted(){this.companyGet()},methods:{companySave(){this.loading=!0,this.company.id?this.$axios.put(`companies/${this.company.id}`,this.company).then(e=>{this.companyDialog=!1;const i=this.companies.findIndex(t=>t.id===this.company.id);this.companies.splice(i,1,e.data),this.$alert.success("empresa actualizado correctamente")}).catch(e=>{this.$alert.error(e.response.data.message)}).finally(()=>{this.loading=!1}):this.$axios.post("companies",this.company).then(e=>{this.companyDialog=!1,this.companies.unshift(e.data),this.$alert.success("empresa agregado correctamente")}).catch(e=>{this.$alert.error(e.response.data.message)}).finally(()=>{this.loading=!1})},companyDelete(e){this.$alert.confirm("\xBFEst\xE1 seguro de eliminar este empresa?").onOk(()=>{this.loading=!0,this.$axios.delete(`companies/${e.id}`).then(i=>{const t=this.companies.findIndex(u=>u.id===i.data.id);console.log(t),t!==-1&&this.companies.splice(t,1),this.$alert.success("empresa eliminado correctamente")}).catch(i=>{this.$alert.error(i.response.data.message)}).finally(()=>{this.loading=!1})})},companyEdit(e){this.companyDialog=!0,this.company={...e}},companyAdd(){this.companyDialog=!0,this.company={name:"",ci:""}},companyGet(){this.loading=!0,this.$axios.get("companies").then(e=>{this.companies=e.data}).catch(e=>{this.$alert.error(e.response.data.message)}).finally(()=>{this.loading=!1})}}},B={class:"row"},U={class:"col-4 flex flex-center"},N={class:"col-8"},G={class:"text-h6"},z={class:"row"},O={class:"col-12"},P={class:"col-12"},F={class:"col-12"};function H(e,i,t,u,l,d){return _(),b(I,{class:"bg-grey-3 q-pa-md"},{default:s(()=>[a(k,{rows:l.companies,columns:l.columns,title:"Empresas","rows-per-page-options":[0],"row-key":"id",dense:"",filter:l.filter,loading:l.loading},{"body-cell-option":s(o=>[a(h,{"auto-width":""},{default:s(()=>[a(r,{flat:"",dense:"",icon:"edit",onClick:g=>d.companyEdit(o.row)},{default:s(()=>[a(c,null,{default:s(()=>[p("Editar")]),_:1})]),_:2},1032,["onClick"]),a(r,{flat:"",dense:"",icon:"delete",onClick:g=>d.companyDelete(o.row)},{default:s(()=>[a(c,null,{default:s(()=>[p("Eliminar")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),"body-cell-name":s(o=>[a(h,{props:o},{default:s(()=>[a(S,{label:o.row.name,"text-color":"white",style:C({backgroundColor:o.row.color}),icon:"business"},null,8,["label","style"])]),_:2},1032,["props"])]),"top-right":s(()=>[n("div",B,[n("div",U,[a(r,{outline:"",dense:"",icon:"add_circle",onClick:d.companyAdd,label:"Agregar","no-caps":"",loading:l.loading},{default:s(()=>[a(c,null,{default:s(()=>[p("Agregar")]),_:1})]),_:1},8,["onClick","loading"])]),n("div",N,[a(m,{modelValue:l.filter,"onUpdate:modelValue":i[0]||(i[0]=o=>l.filter=o),dense:"",class:"q-ml-md",debounce:"300",placeholder:"Buscar",outlined:"",clearable:""},{append:s(()=>[a(x,{name:"search"})]),_:1},8,["modelValue"])])])]),_:1},8,["rows","columns","filter","loading"]),a(v,{modelValue:l.companyDialog,"onUpdate:modelValue":i[5]||(i[5]=o=>l.companyDialog=o),persistent:""},{default:s(()=>[a(w,{style:{width:"250px","max-width":"90vw"}},{default:s(()=>[a(f,{class:"row items-center q-pb-none"},{default:s(()=>[n("div",G,Q(l.company.id?"Editar":"Agregar")+" Empresas",1),a(E),a(r,{flat:"",dense:"",icon:"close",onClick:i[1]||(i[1]=o=>l.companyDialog=!1)})]),_:1}),a(T,{onSubmit:d.companySave},{default:s(()=>[a(f,null,{default:s(()=>[n("div",z,[n("div",O,[a(m,{modelValue:l.company.name,"onUpdate:modelValue":i[2]||(i[2]=o=>l.company.name=o),label:"Nombre",outlined:"",dense:"",rules:[o=>!!o||"Campo requerido"]},null,8,["modelValue","rules"])]),n("div",P,[a(m,{modelValue:l.company.address,"onUpdate:modelValue":i[3]||(i[3]=o=>l.company.address=o),label:"Direcci\xF3n",outlined:"",dense:"",rules:[o=>!!o||"Campo requerido"]},null,8,["modelValue","rules"])]),n("div",F,[a(m,{modelValue:l.company.phone,"onUpdate:modelValue":i[4]||(i[4]=o=>l.company.phone=o),label:"Tel\xE9fono",type:"number",outlined:"",dense:"",rules:[o=>!!o||"Campo requerido"]},null,8,["modelValue","rules"])])])]),_:1}),a(V,{align:"right"},{default:s(()=>[D(a(r,{flat:"",label:"Cancelar",loading:l.loading},null,8,["loading"]),[[q]]),a(r,{color:"primary",label:"Guardar",type:"submit",loading:l.loading},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}var oe=y(A,[["render",H]]);export{oe as default};

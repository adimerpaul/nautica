import{Q as w}from"./QTooltip.fc9b8061.js";import{_ as x,Q as m,R as f,S as t,T as o,U as r,X as g,b8 as D,Z as b,aD as d,ar as Q,aC as y,aB as _,V as n,W as I,aF as A,L as N,aE as T}from"./index.a9a0478f.js";import{b as h,Q as k,C as S}from"./ClosePopup.fc859821.js";import{e as p}from"./QChip.6268d055.js";import{Q as q,a as v}from"./QSpace.804f4413.js";import{a as U,Q as B}from"./QForm.3e4a3570.js";import"./QList.a68b6f8d.js";import"./QMarkupTable.e162dbe9.js";import"./use-fullscreen.16303ce6.js";import"./format.2cae61da.js";const E={name:"BoatsIndex",data(){return{columns:[{name:"option",label:"Opciones",align:"left",field:l=>l.option},{name:"name",label:"Nombre",align:"left",field:l=>l.name},{name:"role",label:"Rol",align:"left",field:l=>l.role},{name:"nacionalidad",label:"Nacionalidad",align:"left",field:l=>l.nacionalidad},{name:"tipoDocumento",label:"Tipo de Documento",align:"left",field:l=>l.tipoDocumento},{name:"numeroIdentificacion",label:"N\xFAmero de Identificaci\xF3n",align:"left",field:l=>l.numeroIdentificacion},{name:"telefono",label:"Tel\xE9fono",align:"left",field:l=>l.telefono},{name:"id",label:"ID",align:"left",field:l=>l.id},{name:"boat",label:"Barco",align:"left",field:l=>{var a;return(a=l.boat)==null?void 0:a.name}}],loading:!1,crews:[],crew:{},crewDialog:!1,clienDialogHistory:!1,filter:"",passwordShow:!1,boats:[]}},mounted(){this.crewGet(),this.boatsGet()},methods:{boatsGet(){this.$axios.get("boats").then(l=>{this.boats=l.data})},crewSave(){this.loading=!0,this.crew.id?this.$axios.put(`crews/${this.crew.id}`,this.crew).then(l=>{this.crewDialog=!1;const a=this.crews.findIndex(s=>s.id===this.crew.id);this.crews.splice(a,1,l.data)}).catch(l=>{this.$alert.error(l.response.data.message)}).finally(()=>{this.loading=!1}):this.$axios.post("crews",this.crew).then(l=>{this.crewDialog=!1,this.crews.unshift(l.data)}).catch(l=>{this.$alert.error(l.response.data.message)}).finally(()=>{this.loading=!1})},crewDelete(l){this.$alert.confirm("\xBFEst\xE1 seguro de eliminar este crewe?").onOk(()=>{this.loading=!0,this.$axios.delete(`crews/${l.id}`).then(a=>{const s=this.crews.findIndex(V=>V.id===a.data.id);console.log(s),s!==-1&&this.crews.splice(s,1)}).catch(a=>{this.$alert.error(a.response.data.message)}).finally(()=>{this.loading=!1})})},crewEdit(l){this.crewDialog=!0,this.crew={...l}},crewAdd(){this.crewDialog=!0,this.crew={name:""}},crewGet(){this.loading=!0,this.$axios.get("crews").then(l=>{this.crews=l.data}).catch(l=>{this.$alert.error(l.response.data.message)}).finally(()=>{this.loading=!1})}}},M={class:"text-h6"},R={class:"row"},G={class:"col-12"},O={class:"col-12"},P={class:"col-12"},F={class:"col-12"},z={class:"col-12"},H={class:"col-12"},L={class:"col-12"};function W(l,a,s,V,i,c){return m(),f(U,{class:"bg-grey-3 q-pa-md"},{default:t(()=>[o(k,{rows:i.crews,columns:i.columns,title:"Tripulantes","rows-per-page-options":[0],"row-key":"id",dense:"",filter:i.filter,loading:i.loading},{"body-cell-option":t(e=>[o(h,{"auto-width":""},{default:t(()=>[o(r,{flat:"",dense:"",icon:"edit",onClick:u=>c.crewEdit(e.row)},{default:t(()=>[o(w,null,{default:t(()=>[g("Editar")]),_:1})]),_:2},1032,["onClick"]),o(r,{flat:"",dense:"",icon:"delete",onClick:u=>c.crewDelete(e.row)},{default:t(()=>[o(w,null,{default:t(()=>[g("Eliminar")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),"body-cell-boat":t(e=>[o(h,{props:e},{default:t(()=>{var u,C;return[o(p,{label:(u=e.row.boat)==null?void 0:u.name,"text-color":"white",style:D({backgroundColor:(C=e.row.boat)==null?void 0:C.color}),icon:"directions_boat"},null,8,["label","style"])]}),_:2},1032,["props"])]),"body-cell-role":t(e=>[o(h,{props:e},{default:t(()=>[e.row.role==="CAPITAN"?(m(),f(p,{key:0,label:"Capitan","text-color":"white",dense:"",icon:"person",color:"primary"})):b("",!0),e.row.role==="MARINERO"?(m(),f(p,{key:1,label:"Tripulante","text-color":"white",dense:"",icon:"person",color:"green"})):b("",!0),e.row.role==="MAQUINISTA"?(m(),f(p,{key:2,label:"Maquinista","text-color":"white",dense:"",icon:"person",color:"accent"})):b("",!0)]),_:2},1032,["props"])]),"top-right":t(()=>[o(r,{outline:"",dense:"",icon:"add_circle",onClick:c.crewAdd,label:"Agregar","no-caps":"",loading:i.loading},{default:t(()=>[o(w,null,{default:t(()=>[g("Agregar")]),_:1})]),_:1},8,["onClick","loading"]),o(d,{modelValue:i.filter,"onUpdate:modelValue":a[0]||(a[0]=e=>i.filter=e),dense:"",class:"q-ml-md",debounce:"300",placeholder:"Buscar",outlined:"",clearable:""},{append:t(()=>[o(Q,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","columns","filter","loading"]),o(T,{modelValue:i.crewDialog,"onUpdate:modelValue":a[9]||(a[9]=e=>i.crewDialog=e),persistent:""},{default:t(()=>[o(y,{style:{width:"250px","max-width":"90vw"}},{default:t(()=>[o(_,{class:"row items-center q-pb-none"},{default:t(()=>[n("div",M,I(i.crew.id?"Editar":"Agregar")+" Tripulantes",1),o(q),o(r,{flat:"",dense:"",icon:"close",onClick:a[1]||(a[1]=e=>i.crewDialog=!1)})]),_:1}),o(B,{onSubmit:c.crewSave},{default:t(()=>[o(_,null,{default:t(()=>[n("div",R,[n("div",G,[o(d,{modelValue:i.crew.name,"onUpdate:modelValue":a[2]||(a[2]=e=>i.crew.name=e),label:"Nombre",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),n("div",O,[o(v,{modelValue:i.crew.role,"onUpdate:modelValue":a[3]||(a[3]=e=>i.crew.role=e),options:[{label:"Capit\xE1n",value:"CAPITAN"},{label:"Marinero",value:"MARINERO"},{label:"Maquinista",value:"MAQUINISTA"}],label:"Rol",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"],"value-field":"value","label-field":"label","map-options":"","emit-value":""},null,8,["modelValue","rules"])]),n("div",P,[o(d,{modelValue:i.crew.nacionalidad,"onUpdate:modelValue":a[4]||(a[4]=e=>i.crew.nacionalidad=e),label:"Nacionalidad",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),n("div",F,[o(d,{modelValue:i.crew.tipoDocumento,"onUpdate:modelValue":a[5]||(a[5]=e=>i.crew.tipoDocumento=e),label:"Tipo de Documento",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),n("div",z,[o(d,{modelValue:i.crew.numeroIdentificacion,"onUpdate:modelValue":a[6]||(a[6]=e=>i.crew.numeroIdentificacion=e),label:"N\xFAmero de Identificaci\xF3n",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),n("div",H,[o(d,{modelValue:i.crew.telefono,"onUpdate:modelValue":a[7]||(a[7]=e=>i.crew.telefono=e),label:"Tel\xE9fono",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),n("div",L,[o(v,{modelValue:i.crew.boat_id,"onUpdate:modelValue":a[8]||(a[8]=e=>i.crew.boat_id=e),options:i.boats,label:"Barco",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"],"emit-value":"","map-options":"","option-value":"id","option-label":"name"},null,8,["modelValue","options","rules"])])])]),_:1}),o(A,{align:"right"},{default:t(()=>[N(o(r,{flat:"",label:"Cancelar",loading:i.loading},null,8,["loading"]),[[S]]),o(r,{color:"primary",label:"Guardar",type:"submit",loading:i.loading},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}var ae=x(E,[["render",W]]);export{ae as default};

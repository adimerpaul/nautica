import{_ as g,O as s,P as b,Q as d,R as t,T as e,aE as h,S as m,W as c,Y as v,X as _,Z as x,aC as C,U as r}from"./index.4e492503.js";import{Q as V}from"./QSelect.c0e2e1ac.js";import{Q as y}from"./QMarkupTable.ce20973e.js";import{Q as R}from"./QPage.b6f28960.js";import{h as f}from"./moment.40bc58bf.js";import"./QChip.372f1346.js";import"./format.2cae61da.js";const k={name:"ViajesActivosIndex",data(){return{loading:!1,fechaInicio:f().startOf("month").format("YYYY-MM-DD"),fechaFin:f().endOf("month").format("YYYY-MM-DD"),tipoReportes:[{label:"Gastos",value:"Gastos"},{label:"Clientes",value:"Clientes"},{label:"Deudores",value:"Deudores"},{label:"Proveedores",value:"Proveedores"},{label:"Consolidado",value:"Consolidado"},{label:"Ganancias",value:"Ganancias"},{label:"Venta",value:"Venta"},{label:"Descarga",value:"Descarga"},{label:"Lances",value:"Lances"},{label:"Provision",value:"Provision"},{label:"Cuentas por Cobrar",value:"Cuentas por Cobrar"}],tipoReporte:"Gastos",data:[]}},mounted(){},methods:{reporteGenerarList(){this.loading=!0,this.$axios.get("reporte",{params:{fechaInicio:this.fechaInicio,fechaFin:this.fechaFin,tipo:this.tipoReporte,get:"list"}}).then(n=>{this.data=n.data}).catch(n=>{this.$alert.error("No existe informaci\xF3n para el rango de fechas seleccionado")}).finally(()=>{this.loading=!1})},reporteGenerar(){this.loading=!0,this.$axios.get("reporte",{responseType:"blob",params:{fechaInicio:this.fechaInicio,fechaFin:this.fechaFin,tipo:this.tipoReporte,get:"pdf"}}).then(n=>{const l=window.URL.createObjectURL(new Blob([n.data],{type:"application/pdf"})),i=window.document.createElement("a");i.href=l,i.setAttribute("download","reporte.pdf"),window.document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(l)}).catch(n=>{this.$alert.error("No existe informaci\xF3n para el rango de fechas seleccionado")}).finally(()=>{this.loading=!1})}}},w={class:"row"},F={class:"col-6 col-md-2 q-pa-xs"},G={class:"col-6 col-md-2 q-pa-xs"},I={class:"col-6 col-md-2 q-pa-xs"},Q={class:"col-6 col-md-2 q-pa-xs text-right"},D={class:"col-6 col-md-4 q-pa-xs text-right"},L={key:0,class:"col-12"},Y=e("thead",null,[e("tr",{class:"bg-primary text-white"},[e("th",null,"Fecha"),e("th",null,"Proveedor"),e("th",null,"Concepto"),e("th",null,"Valor")])],-1),U=e("div",{class:"col-12"},null,-1);function P(n,l,i,q,o,p){return s(),b(R,{class:"bg-grey-3 q-pa-xs"},{default:d(()=>[t(C,null,{default:d(()=>[e("div",w,[e("div",F,[t(h,{modelValue:o.fechaInicio,"onUpdate:modelValue":l[0]||(l[0]=a=>o.fechaInicio=a),label:"Fecha Inicio",type:"date",outlined:"",dense:"",loading:o.loading},null,8,["modelValue","loading"])]),e("div",G,[t(h,{modelValue:o.fechaFin,"onUpdate:modelValue":l[1]||(l[1]=a=>o.fechaFin=a),label:"Fecha Fin",type:"date",outlined:"",dense:"",loading:o.loading},null,8,["modelValue","loading"])]),e("div",I,[t(V,{modelValue:o.tipoReporte,"onUpdate:modelValue":l[2]||(l[2]=a=>o.tipoReporte=a),options:o.tipoReportes,label:"Tipo de Reporte",outlined:"",dense:"",loading:o.loading,"emit-value":"","map-options":""},null,8,["modelValue","options","loading"])]),e("div",Q,[t(m,{color:"primary",label:"Consultar","no-caps":"",loading:o.loading,icon:"search",onClick:p.reporteGenerarList},null,8,["loading","onClick"])]),e("div",D,[t(m,{color:"primary",label:"Generar","no-caps":"",loading:o.loading,icon:"cloud_download",onClick:p.reporteGenerar},null,8,["loading","onClick"])]),o.tipoReporte==="Gastos"?(s(),c("div",L,[t(y,{dense:"",flat:"",bordered:""},{default:d(()=>[Y,e("tbody",null,[(s(!0),c(v,null,_(o.data,a=>{var u;return s(),c("tr",{key:a.id},[e("td",null,r(a.date),1),e("td",null,r((u=a.client)==null?void 0:u.name),1),e("td",null,r(a.description),1),e("td",null,r(a.total),1)])}),128))])]),_:1})])):x("",!0),U])]),_:1})]),_:1})}var S=g(k,[["render",P]]);export{S as default};

import{Q as c}from"./QTooltip.d48ccc40.js";import{_ as y,Q as b,R as _,S as i,T as l,U as t,X as p,b8 as C,aD as m,ar as w,aC as x,aB as f,V as d,W as Q,b7 as V,L as D,aE as v}from"./index.6f95fcdd.js";import{b as g,Q as k,C as S}from"./ClosePopup.9686089f.js";import{e as E}from"./QChip.d6607c8a.js";import{Q as I}from"./QSpace.22bfb77d.js";import{a as T,Q as q}from"./QForm.1c0cbf19.js";import"./QList.992c841a.js";import"./QMarkupTable.48e824b5.js";import"./use-fullscreen.41e7e009.js";import"./format.2cae61da.js";const A={name:"CompaniesIndex",data(){return{columns:[{name:"option",label:"Opciones",align:"left",field:e=>e.option},{name:"id",label:"ID",align:"left",field:e=>e.id},{name:"name",label:"Nombre",align:"left",field:e=>e.name},{name:"address",label:"Direcci\xF3n",align:"left",field:e=>e.address},{name:"phone",label:"Tel\xE9fono",align:"left",field:e=>e.phone}],loading:!1,companies:[],company:{},companyDialog:!1,clienDialogHistory:!1,filter:"",passwordShow:!1}},mounted(){this.companyGet()},methods:{companySave(){this.loading=!0,this.company.id?this.$axios.put(`companies/${this.company.id}`,this.company).then(e=>{this.companyDialog=!1;const n=this.companies.findIndex(s=>s.id===this.company.id);this.companies.splice(n,1,e.data)}).catch(e=>{this.$alert.error(e.response.data.message)}).finally(()=>{this.loading=!1}):this.$axios.post("companies",this.company).then(e=>{this.companyDialog=!1,this.companies.unshift(e.data)}).catch(e=>{this.$alert.error(e.response.data.message)}).finally(()=>{this.loading=!1})},companyDelete(e){this.$alert.confirm("\xBFEst\xE1 seguro de eliminar este companye?").onOk(()=>{this.loading=!0,this.$axios.delete(`companies/${e.id}`).then(n=>{const s=this.companies.findIndex(u=>u.id===n.data.id);console.log(s),s!==-1&&this.companies.splice(s,1)}).catch(n=>{this.$alert.error(n.response.data.message)}).finally(()=>{this.loading=!1})})},companyEdit(e){this.companyDialog=!0,this.company={...e}},companyAdd(){this.companyDialog=!0,this.company={name:"",ci:""}},companyGet(){this.loading=!0,this.$axios.get("companies").then(e=>{this.companies=e.data}).catch(e=>{this.$alert.error(e.response.data.message)}).finally(()=>{this.loading=!1})}}},B={class:"text-h6"},U={class:"row"},N={class:"col-12"},G={class:"col-12"},O={class:"col-12"};function P(e,n,s,u,o,r){return b(),_(T,{class:"bg-grey-3 q-pa-md"},{default:i(()=>[l(k,{rows:o.companies,columns:o.columns,title:"Empresas","rows-per-page-options":[0],"row-key":"id",dense:"",filter:o.filter,loading:o.loading},{"body-cell-option":i(a=>[l(g,{"auto-width":""},{default:i(()=>[l(t,{flat:"",dense:"",icon:"edit",onClick:h=>r.companyEdit(a.row)},{default:i(()=>[l(c,null,{default:i(()=>[p("Editar")]),_:1})]),_:2},1032,["onClick"]),l(t,{flat:"",dense:"",icon:"delete",onClick:h=>r.companyDelete(a.row)},{default:i(()=>[l(c,null,{default:i(()=>[p("Eliminar")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),"body-cell-name":i(a=>[l(g,{props:a},{default:i(()=>[l(E,{label:a.row.name,"text-color":"white",style:C({backgroundColor:a.row.color}),icon:"business"},null,8,["label","style"])]),_:2},1032,["props"])]),"top-right":i(()=>[l(t,{outline:"",dense:"",icon:"add_circle",onClick:r.companyAdd,label:"Agregar","no-caps":"",loading:o.loading},{default:i(()=>[l(c,null,{default:i(()=>[p("Agregar")]),_:1})]),_:1},8,["onClick","loading"]),l(m,{modelValue:o.filter,"onUpdate:modelValue":n[0]||(n[0]=a=>o.filter=a),dense:"",class:"q-ml-md",debounce:"300",placeholder:"Buscar",outlined:"",clearable:""},{append:i(()=>[l(w,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","columns","filter","loading"]),l(v,{modelValue:o.companyDialog,"onUpdate:modelValue":n[5]||(n[5]=a=>o.companyDialog=a),persistent:""},{default:i(()=>[l(x,{style:{width:"250px","max-width":"90vw"}},{default:i(()=>[l(f,{class:"row items-center q-pb-none"},{default:i(()=>[d("div",B,Q(o.company.id?"Editar":"Agregar")+" Empresas",1),l(I),l(t,{flat:"",dense:"",icon:"close",onClick:n[1]||(n[1]=a=>o.companyDialog=!1)})]),_:1}),l(q,{onSubmit:r.companySave},{default:i(()=>[l(f,null,{default:i(()=>[d("div",U,[d("div",N,[l(m,{modelValue:o.company.name,"onUpdate:modelValue":n[2]||(n[2]=a=>o.company.name=a),label:"Nombre",outlined:"",dense:"",rules:[a=>!!a||"Campo requerido"]},null,8,["modelValue","rules"])]),d("div",G,[l(m,{modelValue:o.company.address,"onUpdate:modelValue":n[3]||(n[3]=a=>o.company.address=a),label:"Direcci\xF3n",outlined:"",dense:"",rules:[a=>!!a||"Campo requerido"]},null,8,["modelValue","rules"])]),d("div",O,[l(m,{modelValue:o.company.phone,"onUpdate:modelValue":n[4]||(n[4]=a=>o.company.phone=a),label:"Tel\xE9fono",outlined:"",dense:"",rules:[a=>!!a||"Campo requerido"]},null,8,["modelValue","rules"])])])]),_:1}),l(V,{align:"right"},{default:i(()=>[D(l(t,{flat:"",label:"Cancelar",loading:o.loading},null,8,["loading"]),[[S]]),l(t,{color:"primary",label:"Guardar",type:"submit",loading:o.loading},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}var M=y(A,[["render",P]]);export{M as default};

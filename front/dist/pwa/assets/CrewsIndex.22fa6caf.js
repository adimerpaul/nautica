import{Q as h}from"./QTooltip.848ed6ce.js";import{_ as I,O as n,P as d,Q as t,R as o,S as c,V as C,b9 as O,Z as m,T as s,aE as g,aq as _,aC as N,aB as V,U as E,aT as T,J as x,aD as D}from"./index.4e492503.js";import{b,Q as y}from"./QTable.94049b08.js";import{e as u}from"./QChip.372f1346.js";import{Q}from"./QSpace.21d55d61.js";import{Q as f}from"./QSelect.c0e2e1ac.js";import{Q as U}from"./QForm.8f75e92a.js";import{Q as k}from"./QPage.b6f28960.js";import{C as S}from"./ClosePopup.d5206220.js";import"./QList.52522713.js";import"./QMarkupTable.ce20973e.js";import"./use-fullscreen.16b07beb.js";import"./format.2cae61da.js";const R={name:"BoatsIndex",data(){return{columns:[{name:"option",label:"Opciones",align:"left",field:l=>l.option},{name:"name",label:"Nombre",align:"left",field:l=>l.name},{name:"role",label:"Cargo",align:"left",field:l=>l.role},{name:"nacionalidad",label:"Nacionalidad",align:"left",field:l=>l.nacionalidad},{name:"tipoDocumento",label:"Tipo de Documento",align:"left",field:l=>l.tipoDocumento},{name:"numeroIdentificacion",label:"N\xFAmero de Identificaci\xF3n",align:"left",field:l=>l.numeroIdentificacion},{name:"telefono",label:"Tel\xE9fono",align:"left",field:l=>l.telefono},{name:"id",label:"ID",align:"left",field:l=>l.id},{name:"boat",label:"Barco",align:"left",field:l=>{var i;return(i=l.boat)==null?void 0:i.name}},{name:"estado",label:"Estado",align:"left",field:l=>l.estado}],loading:!1,crews:[],crew:{},crewDialog:!1,clienDialogHistory:!1,filter:"",passwordShow:!1,boats:[]}},mounted(){this.crewGet(),this.boatsGet()},methods:{boatsGet(){this.$axios.get("boats").then(l=>{this.boats=l.data})},crewSave(){this.loading=!0,this.crew.id?this.$axios.put(`crews/${this.crew.id}`,this.crew).then(l=>{this.crewDialog=!1;const i=this.crews.findIndex(r=>r.id===this.crew.id);this.crews.splice(i,1,l.data),this.$alert.success("Tripulante actualizado")}).catch(l=>{this.$alert.error(l.response.data.message)}).finally(()=>{this.loading=!1}):this.$axios.post("crews",this.crew).then(l=>{this.crewDialog=!1,this.crews.unshift(l.data),this.$alert.success("Tripulante agregado")}).catch(l=>{this.$alert.error(l.response.data.message)}).finally(()=>{this.loading=!1})},crewDelete(l){this.$alert.confirm("\xBFEst\xE1 seguro de eliminar este Tripulante?").onOk(()=>{this.loading=!0,this.$axios.delete(`crews/${l.id}`).then(i=>{const r=this.crews.findIndex(A=>A.id===i.data.id);console.log(r),r!==-1&&this.crews.splice(r,1),this.$alert.success("Tripulante eliminado")}).catch(i=>{this.$alert.error("No se puede eliminar registro, contacte con su administrador.")}).finally(()=>{this.loading=!1})})},crewEdit(l){this.crewDialog=!0,this.crew={...l}},crewAdd(){this.crewDialog=!0,this.crew={name:"",estado:"Activo"}},crewGet(){this.loading=!0,this.$axios.get("crews").then(l=>{this.crews=l.data}).catch(l=>{this.$alert.error(l.response.data.message)}).finally(()=>{this.loading=!1})}}},q={class:"row"},B={class:"col-4 flex flex-center"},G={class:"col-8"},P={class:"text-h6"},L={class:"row"},M={class:"col-12"},H={class:"col-12"},z={class:"col-12"},Y={class:"col-12"},Z={class:"col-12"},F={class:"col-12"},J={class:"col-12"},X={class:"col-12"};function j(l,i,r,A,a,p){return n(),d(k,{class:"bg-grey-3 q-pa-md"},{default:t(()=>[o(y,{rows:a.crews,columns:a.columns,title:"Tripulantes","rows-per-page-options":[0],"row-key":"id",dense:"",filter:a.filter,loading:a.loading},{"body-cell-option":t(e=>[o(b,{"auto-width":""},{default:t(()=>[o(c,{flat:"",dense:"",icon:"edit",onClick:w=>p.crewEdit(e.row)},{default:t(()=>[o(h,null,{default:t(()=>[C("Editar")]),_:1})]),_:2},1032,["onClick"]),o(c,{flat:"",dense:"",icon:"delete",onClick:w=>p.crewDelete(e.row)},{default:t(()=>[o(h,null,{default:t(()=>[C("Eliminar")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),"body-cell-boat":t(e=>[o(b,{props:e},{default:t(()=>{var w,v;return[o(u,{label:(w=e.row.boat)==null?void 0:w.name,"text-color":"white",style:O({backgroundColor:(v=e.row.boat)==null?void 0:v.color}),icon:"directions_boat"},null,8,["label","style"])]}),_:2},1032,["props"])]),"body-cell-estado":t(e=>[o(b,{props:e},{default:t(()=>[e.row.estado==="Activo"?(n(),d(u,{key:0,label:"Activo","text-color":"white",dense:"",icon:"check",color:"green"})):m("",!0),e.row.estado==="Inactivo"?(n(),d(u,{key:1,label:"Inactivo","text-color":"white",dense:"",icon:"close",color:"red"})):m("",!0)]),_:2},1032,["props"])]),"body-cell-role":t(e=>[o(b,{props:e},{default:t(()=>[e.row.role==="CAPITAN"?(n(),d(u,{key:0,label:"Capitan","text-color":"white",dense:"",icon:"person",color:"primary"})):m("",!0),e.row.role==="MARINERO"?(n(),d(u,{key:1,label:"Tripulante","text-color":"white",dense:"",icon:"person",color:"green"})):m("",!0),e.row.role==="MAQUINISTA"?(n(),d(u,{key:2,label:"Maquinista","text-color":"white",dense:"",icon:"person",color:"accent"})):m("",!0)]),_:2},1032,["props"])]),"top-right":t(()=>[s("div",q,[s("div",B,[o(c,{outline:"",dense:"",icon:"add_circle",onClick:p.crewAdd,label:"Agregar","no-caps":"",loading:a.loading},{default:t(()=>[o(h,null,{default:t(()=>[C("Agregar")]),_:1})]),_:1},8,["onClick","loading"])]),s("div",G,[o(g,{modelValue:a.filter,"onUpdate:modelValue":i[0]||(i[0]=e=>a.filter=e),dense:"",class:"q-ml-md",debounce:"300",placeholder:"Buscar",outlined:"",clearable:""},{append:t(()=>[o(_,{name:"search"})]),_:1},8,["modelValue"])])])]),_:1},8,["rows","columns","filter","loading"]),o(D,{modelValue:a.crewDialog,"onUpdate:modelValue":i[10]||(i[10]=e=>a.crewDialog=e),persistent:""},{default:t(()=>[o(N,{style:{width:"250px","max-width":"90vw"}},{default:t(()=>[o(V,{class:"row items-center q-pb-none"},{default:t(()=>[s("div",P,E(a.crew.id?"Editar":"Agregar")+" Tripulantes",1),o(Q),o(c,{flat:"",dense:"",icon:"close",onClick:i[1]||(i[1]=e=>a.crewDialog=!1)})]),_:1}),o(U,{onSubmit:p.crewSave},{default:t(()=>[o(V,null,{default:t(()=>[s("div",L,[s("div",M,[o(g,{modelValue:a.crew.name,"onUpdate:modelValue":i[2]||(i[2]=e=>a.crew.name=e),label:"Nombre",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),s("div",H,[o(f,{modelValue:a.crew.role,"onUpdate:modelValue":i[3]||(i[3]=e=>a.crew.role=e),options:l.$cargos,label:"Cargo",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"],"value-field":"value","label-field":"label","map-options":"","emit-value":""},null,8,["modelValue","options","rules"])]),s("div",z,[o(f,{modelValue:a.crew.nacionalidad,"onUpdate:modelValue":i[4]||(i[4]=e=>a.crew.nacionalidad=e),options:["SALVADORE\xD1O","GUATEMALTECO","HONDURE\xD1O","NICARAGUENSE","COSTARRICENSE","PANAME\xD1O","COLOMBIANO","VENEZOLANO","ECUATORIANO","PERUANO","BOLIVIANO","CHILENO","ARGENTINO","URUGUAYO","PARAGUAYO","BRASILE\xD1O","MEXICANO","CUBANO","DOMINICANO","OTRO"],label:"Nacionalidad",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"],"value-field":"value","label-field":"label"},null,8,["modelValue","rules"])]),s("div",Y,[o(f,{modelValue:a.crew.tipoDocumento,"onUpdate:modelValue":i[5]||(i[5]=e=>a.crew.tipoDocumento=e),options:["DUI","NIT","PASAPORTE","LICENCIA","OTRO"],label:"Tipo de Documento",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"],"value-field":"value","label-field":"label"},null,8,["modelValue","rules"])]),s("div",Z,[o(g,{modelValue:a.crew.numeroIdentificacion,"onUpdate:modelValue":i[6]||(i[6]=e=>a.crew.numeroIdentificacion=e),label:"N\xFAmero de Identificaci\xF3n",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),s("div",F,[o(g,{modelValue:a.crew.telefono,"onUpdate:modelValue":i[7]||(i[7]=e=>a.crew.telefono=e),label:"Tel\xE9fono",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),s("div",J,[o(f,{modelValue:a.crew.boat_id,"onUpdate:modelValue":i[8]||(i[8]=e=>a.crew.boat_id=e),options:a.boats,label:"Barco",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"],"emit-value":"","map-options":"","option-value":"id","option-label":"name"},null,8,["modelValue","options","rules"])]),s("div",X,[o(f,{modelValue:a.crew.estado,"onUpdate:modelValue":i[9]||(i[9]=e=>a.crew.estado=e),options:["Activo","Inactivo"],label:"Estado",outlined:"",dense:"",rules:[e=>!!e||"Campo requerido"],"value-field":"value","label-field":"label"},null,8,["modelValue","rules"])])])]),_:1}),o(T,{align:"right"},{default:t(()=>[x(o(c,{flat:"",label:"Cancelar",loading:a.loading},null,8,["loading"]),[[S]]),o(c,{color:"primary",label:"Guardar",type:"submit",loading:a.loading},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}var ce=I(R,[["render",j]]);export{ce as default};

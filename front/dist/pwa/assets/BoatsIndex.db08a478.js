import{_ as D,Q as c,R as u,S as o,T as e,L as b,ar as p,X as m,b9 as Q,U as f,aE as k,aC as V,aB as x,V as h,W as S,aT as B,aD as E,a3 as g}from"./index.019f517a.js";import{a as _,b as d,e as v}from"./QChip.c1672a5a.js";import{Q as I}from"./QBtnDropdown.dc9074a5.js";import{b as w,Q as A}from"./QTable.bed6e1e7.js";import{Q as T}from"./QTooltip.26793da5.js";import{b as q,Q as G}from"./QSpace.c2738bce.js";import{Q as N}from"./QForm.50dfdfaa.js";import{Q as U}from"./QPage.25c125fb.js";import{C as R}from"./ClosePopup.e4344b62.js";import"./QList.01f897bd.js";import"./QMarkupTable.10eb4a66.js";import"./use-fullscreen.7bc4a682.js";import"./format.2cae61da.js";const O={name:"BoatsIndex",data(){return{columns:[{name:"option",label:"Opciones",align:"left",field:a=>a.option},{name:"id",label:"ID",align:"left",field:a=>a.id},{name:"name",label:"Nombre",align:"left",field:a=>a.name},{name:"company",label:"Empresa",align:"left",field:a=>{var l;return(l=a.company)==null?void 0:l.name}}],loading:!1,boats:[],boat:{},boatDialog:!1,clienDialogHistory:!1,filter:"",passwordShow:!1,companies:[]}},mounted(){this.boatGet(),this.companiesGet()},methods:{boatShowClick(a,l){this.$router.push("boatdetails/"+l.id)},boatShow(a){this.$router.push("boatdetails/"+a.id)},companiesGet(){this.$axios.get("companies").then(a=>{this.companies=a.data})},boatSave(){this.loading=!0,this.boat.id?this.$axios.put(`boats/${this.boat.id}`,this.boat).then(a=>{this.boatDialog=!1;const l=this.boats.findIndex(n=>n.id===this.boat.id);this.boats.splice(l,1,a.data)}).catch(a=>{this.$alert.error(a.response.data.message)}).finally(()=>{this.loading=!1}):this.$axios.post("boats",this.boat).then(a=>{this.boatDialog=!1,this.boats.unshift(a.data)}).catch(a=>{this.$alert.error(a.response.data.message)}).finally(()=>{this.loading=!1})},boatDelete(a){this.$alert.confirm("\xBFEst\xE1 seguro de eliminar este boate?").onOk(()=>{this.loading=!0,this.$axios.delete(`boats/${a.id}`).then(l=>{const n=this.boats.findIndex(y=>y.id===l.data.id);console.log(n),n!==-1&&this.boats.splice(n,1)}).catch(l=>{this.$alert.error(l.response.data.message)}).finally(()=>{this.loading=!1})})},boatEdit(a){this.boatDialog=!0,this.boat={...a}},boatAdd(){this.boatDialog=!0,this.boat={name:""}},boatGet(){this.loading=!0,this.$axios.get("boats").then(a=>{this.boats=a.data}).catch(a=>{this.$alert.error(a.response.data.message)}).finally(()=>{this.loading=!1})}}},P={class:"text-h6"},z={class:"row"},F={class:"col-12"},H={class:"col-12"};function L(a,l,n,y,i,r){return c(),u(U,{class:"bg-grey-3 q-pa-md"},{default:o(()=>[e(A,{rows:i.boats,columns:i.columns,title:"Botes","rows-per-page-options":[0],"row-key":"id",dense:"",filter:i.filter,loading:i.loading,onRowClick:r.boatShowClick},{"body-cell-option":o(t=>[e(w,{"auto-width":""},{default:o(()=>[e(I,{label:"Opciones",color:"primary","auto-close":"","no-caps":"",size:"10px",onClick:l[0]||(l[0]=s=>{s.stopPropagation()})},{default:o(()=>[b((c(),u(_,{clickable:"",onClick:s=>r.boatShow(t.row)},{default:o(()=>[e(d,{avatar:""},{default:o(()=>[e(p,{name:"visibility"})]),_:1}),e(d,null,{default:o(()=>[m("Ver")]),_:1})]),_:2},1032,["onClick"])),[[g]]),b((c(),u(_,{clickable:"",onClick:s=>r.boatEdit(t.row)},{default:o(()=>[e(d,{avatar:""},{default:o(()=>[e(p,{name:"edit"})]),_:1}),e(d,null,{default:o(()=>[m("Editar")]),_:1})]),_:2},1032,["onClick"])),[[g]]),b((c(),u(_,{clickable:"",onClick:s=>r.boatDelete(t.row)},{default:o(()=>[e(d,{avatar:""},{default:o(()=>[e(p,{name:"delete"})]),_:1}),e(d,null,{default:o(()=>[m("Eliminar")]),_:1})]),_:2},1032,["onClick"])),[[g]])]),_:2},1024)]),_:2},1024)]),"body-cell-name":o(t=>[e(w,{props:t},{default:o(()=>[e(v,{label:t.row.name,"text-color":"white",style:Q({backgroundColor:t.row.color}),icon:"directions_boat"},null,8,["label","style"])]),_:2},1032,["props"])]),"body-cell-company":o(t=>[e(w,{props:t},{default:o(()=>{var s,C;return[e(v,{label:(s=t.row.company)==null?void 0:s.name,"text-color":"white",dense:"",style:Q({backgroundColor:(C=t.row.company)==null?void 0:C.color}),icon:"business"},null,8,["label","style"])]}),_:2},1032,["props"])]),"top-right":o(()=>[e(f,{outline:"",dense:"",icon:"add_circle",onClick:r.boatAdd,label:"Agregar","no-caps":"",loading:i.loading},{default:o(()=>[e(T,null,{default:o(()=>[m("Agregar")]),_:1})]),_:1},8,["onClick","loading"]),e(k,{modelValue:i.filter,"onUpdate:modelValue":l[1]||(l[1]=t=>i.filter=t),dense:"",class:"q-ml-md",debounce:"300",placeholder:"Buscar",outlined:"",clearable:""},{append:o(()=>[e(p,{name:"search"})]),_:1},8,["modelValue"])]),default:o(()=>[m(" > ")]),_:1},8,["rows","columns","filter","loading","onRowClick"]),e(E,{modelValue:i.boatDialog,"onUpdate:modelValue":l[5]||(l[5]=t=>i.boatDialog=t),persistent:""},{default:o(()=>[e(V,{style:{width:"250px","max-width":"90vw"}},{default:o(()=>[e(x,{class:"row items-center q-pb-none"},{default:o(()=>[h("div",P,S(i.boat.id?"Editar":"Agregar")+" Botes",1),e(q),e(f,{flat:"",dense:"",icon:"close",onClick:l[2]||(l[2]=t=>i.boatDialog=!1)})]),_:1}),e(N,{onSubmit:r.boatSave},{default:o(()=>[e(x,null,{default:o(()=>[h("div",z,[h("div",F,[e(k,{modelValue:i.boat.name,"onUpdate:modelValue":l[3]||(l[3]=t=>i.boat.name=t),label:"Nombre",outlined:"",dense:"",rules:[t=>!!t||"Campo requerido"]},null,8,["modelValue","rules"])]),h("div",H,[e(G,{modelValue:i.boat.company_id,"onUpdate:modelValue":l[4]||(l[4]=t=>i.boat.company_id=t),options:i.companies,label:"Empresa",outlined:"",dense:"",rules:[t=>!!t||"Campo requerido"],"emit-value":"","map-options":"","option-value":"id","option-label":"name"},null,8,["modelValue","options","rules"])])])]),_:1}),e(B,{align:"right"},{default:o(()=>[b(e(f,{flat:"",label:"Cancelar",loading:i.loading},null,8,["loading"]),[[R]]),e(f,{color:"primary",label:"Guardar",type:"submit",loading:i.loading},null,8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}var le=D(O,[["render",L]]);export{le as default};

import{Q as c}from"./QImg.dd55f7b8.js";import{_ as m,O as n,P as p,Q as t,R as e,T as i,aC as _,aB as f,W as h,Z as g,be as v,aE as d,aq as l,S as b}from"./index.4e492503.js";import{Q as w}from"./QForm.8f75e92a.js";import{Q as x}from"./QPage.b6f28960.js";import{a as Q,b as V}from"./QPageContainer.9b16b16d.js";var y="/assets/login.196a23db.jpg";const k={data(){return{username:"",password:"",passwordVisible:!1,loading:!1}},methods:{login(){this.loading=!0,this.$axios.post("login",{username:this.username,password:this.password}).then(a=>{this.$store.user=a.data.user,this.$store.isLogged=!0,localStorage.setItem("tokenPrestamos",a.data.token),localStorage.setItem("permisos",JSON.stringify(a.data.user.permisosName)),this.$axios.defaults.headers.common.Authorization=`Bearer ${a.data.token}`;const s=a.data.user.permisosName;s.includes("ver inicio")?this.$router.push("/"):s.includes("ver ventas")?this.$router.push("/sales"):s.includes("ver viajes")?this.$router.push("/viajes"):this.$router.push("/new")}).catch(a=>{this.$alert.error(a.response.data.message)}).finally(()=>{this.loading=!1})}}},S={class:"row"},C=i("div",{class:"col-12 col-md-1"},null,-1),I={class:"col-12 col-md-10"},B={class:"row"},N={key:0,class:"col-12 col-md-8 flex flex-center"},q={class:"col-12 col-md-4 q-pa-md"},P=i("div",{class:"text-h6 text-center text-bold"},"Iniciar Sesi\xF3n",-1),$=i("div",{class:"text-caption text-center"},"Ingresa tus credenciales para acceder al sistema",-1);function E(a,s,L,j,o,u){return n(),p(Q,null,{default:t(()=>[e(V,null,{default:t(()=>[e(x,{class:"q-pa-lg dark-overlay"},{default:t(()=>[i("div",S,[C,i("div",I,[e(_,null,{default:t(()=>[e(f,null,{default:t(()=>[i("div",B,[a.$q.screen.lt.md?g("",!0):(n(),h("div",N,[e(c,{src:y})])),i("div",q,[e(w,{onSubmit:v(u.login,["prevent"])},{default:t(()=>[P,$,e(d,{modelValue:o.username,"onUpdate:modelValue":s[0]||(s[0]=r=>o.username=r),label:"Usuario",outlined:"",rules:[r=>!!r||"Este campo es requerido"],rounded:""},{prepend:t(()=>[e(l,{name:"account_circle"})]),_:1},8,["modelValue","rules"]),e(d,{modelValue:o.password,"onUpdate:modelValue":s[2]||(s[2]=r=>o.password=r),label:"Contrase\xF1a",type:o.passwordVisible?"text":"password",outlined:"",rules:[r=>!!r||"Este campo es requerido"],rounded:""},{prepend:t(()=>[e(l,{name:"lock"})]),append:t(()=>[e(l,{name:o.passwordVisible?"visibility":"visibility_off",onClick:s[1]||(s[1]=r=>o.passwordVisible=!o.passwordVisible)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),e(b,{color:"primary",class:"full-width",rounded:"",label:"Iniciar Sesi\xF3n",type:"submit","no-caps":"",loading:o.loading},null,8,["loading"])]),_:1},8,["onSubmit"])])])]),_:1})]),_:1})])])]),_:1})]),_:1})]),_:1})}var J=m(k,[["render",E]]);export{J as default};

import{_ as D,O as c,P as n,Q as d,R as l,T as e,S as k,Z as h,U as i,b9 as Q,aE as F,W as q,X as A,Y as B,aC as M}from"./index.4e492503.js";import{e as r}from"./QChip.372f1346.js";import{Q as P}from"./QMarkupTable.ce20973e.js";import{Q as z}from"./QPage.b6f28960.js";import{l as O}from"./lodash.733f4815.js";import{h as I}from"./moment.40bc58bf.js";import"./QSpace.21d55d61.js";import"./QSelect.c0e2e1ac.js";import"./QForm.8f75e92a.js";import"./ClosePopup.d5206220.js";import"./index.22e72184.js";import"./_commonjsHelpers.48c1ef9f.js";import"./format.2cae61da.js";const E={name:"ViajesShow",data(){return{id:"",viaje:{observaciones:""},fechaIni:"",fechaFin:"",gastoDialog:!1,debouncedUpdateObservaciones:null,dialogAgregarProducto:!1,products:[],productsAll:[],product:"",cantidad:"",loading:!1,productViaje:[],productBuy:[],descargar:{viaje_id:"",descarga:"",dia:"",fecha:""},lanceDialog:!1,lance:{},lances:[]}},mounted(){this.id=this.$route.params.id,this.getViaje(),this.debouncedUpdateObservaciones=O.exports.debounce(this.updateObservaciones,1e3)},methods:{gastoCreated(s){this.gastoDialog=!1},productAdd(){this.loading=!0,this.$axios.post("productAdd",{products:this.productBuy,descarga:this.descargar}).then(s=>{this.dialogAgregarProducto=!1,this.$alert.success("Producto agregado"),this.getViaje()}).catch(s=>{this.$alert.error(s.response.data.message)}).finally(()=>{this.loading=!1})},productsGet(){this.$axios.get("products").then(s=>{this.products=s.data,this.productsAll=s.data}).catch(s=>{console.log(s)})},updateObservaciones(s){this.$axios.put(`updateObservaciones/${this.id}`,{observaciones:s}).then(a=>{}).catch(a=>{console.log(a)})},getViaje(){this.loading=!0,this.$axios.get(`viajes/${this.id}`).then(s=>{this.viaje=s.data.viaje,this.fechaIni=I(this.viaje.fechaInicio).format("YYYY-MM-DD"),this.fechaFin=I(this.viaje.fechaFin).format("YYYY-MM-DD"),this.viajesConciliacion()}).catch(s=>{console.log(s)}).finally(()=>{this.loading=!1})},viajesConciliacion(){const s={fechaIni:this.fechaIni,fechaFin:this.fechaFin};this.$axios.get(`viajesConciliacion/${this.id}`,{params:s}).then(a=>{this.viaje=a.data.viaje,this.products=a.data.productos}).catch(a=>{console.log(a)}).finally(()=>{this.loading=!1})}}},U={class:"row"},S=e("div",{class:"col-12"},[e("div",{class:"text-h5 text-center bg-primary text-white"},"Concolidados")],-1),N={class:"col-6 col-md-2 q-pa-xs"},L={class:"col-6 col-md-2 q-pa-xs"},T=e("label",{class:"text-bold"},"Viaje",-1),G=e("br",null,null,-1),R={class:"col-6 col-md-2 q-pa-xs"},W=e("label",{class:"text-bold"},"Fechas",-1),X={class:"col-6 col-md-2 q-pa-xs"},Z=e("label",{class:"text-bold"},"Barco",-1),H={class:"col-6 col-md-2 q-pa-xs"},J=e("label",{class:"text-bold"},"Empresa",-1),K=e("br",null,null,-1),$={class:"col-6 col-md-2 q-pa-xs q-mt-md"},ee={class:"col-6 col-md-2 q-pa-xs"},se={class:"col-6 col-md-2 q-pa-xs"},te=e("div",{class:"col-12 col-md-8 q-pa-xs"},null,-1),ae={class:"col-12"},oe=e("thead",null,[e("tr",{class:"bg-primary text-white"},[e("th",{class:"text-center"},"Producto"),e("th",{class:"text-center"},"Descarga"),e("th",{class:"text-center"},"Lances"),e("th",{class:"text-center"},"Ventas"),e("th",{class:"text-center"},"Inventario")])],-1),ie={class:"text-center"},le={class:"text-center"},ce={class:"text-center"},ne={class:"text-center"},re=e("div",{id:"myElement",class:"hidden"},null,-1);function de(s,a,he,ue,t,Y){return c(),n(z,{class:"bg-grey-3 q-pa-xs"},{default:d(()=>[l(M,null,{default:d(()=>{var u,p,m,g,v,_,f,b,x,j,y,V,C;return[e("div",U,[S,e("div",N,[l(k,{color:"primary",label:"Volver",onClick:a[0]||(a[0]=()=>{this.$router.push("/viajesActivos")}),"no-caps":"",icon:"arrow_back",size:"sm",loading:t.loading},null,8,["loading"])]),e("div",L,[T,G,((u=t.viaje)==null?void 0:u.status)==="Finalizado"?(c(),n(r,{key:0,label:(p=t.viaje)==null?void 0:p.status,"text-color":"white",dense:"",color:"green"},null,8,["label"])):h("",!0),((m=t.viaje)==null?void 0:m.status)==="Pendiente"?(c(),n(r,{key:1,label:(g=t.viaje)==null?void 0:g.status,"text-color":"white",dense:"",color:"orange"},null,8,["label"])):h("",!0),((v=t.viaje)==null?void 0:v.status)==="En curso"?(c(),n(r,{key:2,label:(_=t.viaje)==null?void 0:_.status,"text-color":"white",dense:"",color:"blue"},null,8,["label"])):h("",!0)]),e("div",R,[W,e("div",null,i(s.$filters.formatdMY(t.viaje.fechaInicio))+" "+i(s.$filters.formatdMY(t.viaje.fechaFin)),1)]),e("div",X,[Z,e("div",null,i((f=t.viaje.boat)==null?void 0:f.name),1)]),e("div",H,[J,K,l(r,{size:"12px",label:(j=(x=(b=t.viaje)==null?void 0:b.boat)==null?void 0:x.company)==null?void 0:j.name,"text-color":"white",style:Q({backgroundColor:(C=(V=(y=t.viaje)==null?void 0:y.boat)==null?void 0:V.company)==null?void 0:C.color}),icon:"business"},null,8,["label","style"])]),e("div",$,[l(k,{color:"primary",label:"Actualizar",onClick:Y.viajesConciliacion,"no-caps":"",icon:"refresh",size:"sm",loading:t.loading},null,8,["onClick","loading"])]),e("div",ee,[l(F,{modelValue:t.fechaIni,"onUpdate:modelValue":a[1]||(a[1]=o=>t.fechaIni=o),outlined:"",dense:"",label:"Fecha Inicio",type:"date"},null,8,["modelValue"])]),e("div",se,[l(F,{modelValue:t.fechaFin,"onUpdate:modelValue":a[2]||(a[2]=o=>t.fechaFin=o),outlined:"",dense:"",label:"Fecha Fin",type:"date"},null,8,["modelValue"])]),te,e("div",ae,[l(P,{flat:"",dense:"",bordered:""},{default:d(()=>[oe,e("tbody",null,[(c(!0),q(B,null,A(t.products,(o,w)=>(c(),q("tr",{key:w},[e("td",null,i(o.name),1),e("td",ie,i(o.descarga),1),e("td",le,i(o.lances),1),e("td",ce,i(o.ventas),1),e("td",ne,i(o.inventario),1)]))),128))])]),_:1})])])]}),_:1}),re]),_:1})}var Fe=D(E,[["render",de]]);export{Fe as default};
